---
- name: Create Service Project
  os_project:
    name: service
    state: present
    description: "Service Project"
    enabled: yes
    endpoint_type: admin
    auth_type: password
    auth:
      auth_url: "http://{{ ctrl_ip_womask }}:{{ keystone_admin_url_port }}/v3"
      username: admin
      password: "{{ admin_pass }}"
      project_name: admin
      user_domain_name: Default
      project_domain_name: Default

- name: Create Service Project with file
  os_project:
    cloud: "{{ playground_name }}_admin"
    state: present
    name: service
    domain_id: default
    description: "Service Project"
    enabled: yes

- name: Create Demo Project
  os_project:
    cloud: "{{ playground_name }}_admin"
    state: present
    name: demo
    description: "Demo Project"
    enabled: yes

- name: Create Demo User
  os_user:
    cloud: "{{ playground_name }}_admin"
    name: demo
    password: "{{ demo_pass }}"
    state: present
    enabled: yes

- name: Create User Role and Associate it to Demo
  os_user_role:
    cloud: "{{ playground_name }}_admin"
    user: demo
    project: demo
    role: user
    state: present
